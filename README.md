# Проектная работа 10 спринта - Сервис notifications

Проектные работы в этом модуле в команде. Задания на спринт вы найдёте внутри тем.  
Командный репозиторий 10го спринта - https://github.com/ilya-spy/notifications_sprint_1.git  

### Команда №9 (2 чел)
`@bairachny.daniil @ilyaspy`  
`тимлид - @ilyaspy`  

## Aнализ ТЗ
### Программная Архитектура сервиса нотификаций в данной реализации предполагает наличие следующих программных компонентов и микросервисов:

0. Кофнигурационная база данных с типами уведомлений и метаданными трекинга последнего события
1. Сервис (воркер) немедленных емейлов для важных событий через АПИ сервиса рассылки (300+ сообщ/день)
2. Сервис (воркер) отложенных емейлов - порционный асинхронный сервис рассылок по массоввым группам
3. Балансировщик RabbitMQ отправителей и воркеров для контроля масссовых рассылок
4. Сервис-шаблонизатор для персонализации сообщений
5. Адаптер доступа к шаблонизатору и планировщику по АПИ
6. Адаптер доступа к шаблонизатору и планировщику по веб-сокет (админ-панель-приложение)
7. Сервис хранения истории отправленных уведомлений в Кафка

### Архитектура Решений сервиса нотификаций в данной реализации предполагает наличие следующиъ целевых сценариев использования.

1. Связка UGС -> API Notifications для сводных отчетов о лайках
2. Связка Admin Panel <- websocket -> Notifications для ручной/тестовой отправки
3. Связка Admin Panel -> API Notifications для ручной настройки расписания отправки уведомлений
4. Связка Admin Panel -> Шаблонизатор для управления персонализацией тела ручных рассылок
5. Связка Планировщик -> Исполнители (воркеры) для создания периодических (недельных) событий


## Запуск тестовых стендов приложения в Docker Composer
Полный стенд решения -  
`make notifications\dev\setup`  
`make notifications\dev\teardown`  

Настройка стенда api notifications:  
1. `make frontend\dev\setup`  -> start  
2. `make frontend\dev\teardown`  -> finish

Настройка стенда worker:  
1. `make worker\dev\setup`  -> start  
2. `make worker\mailer` -> login  
2. `make worker\dev\teardown`  -> finish

Настройка стенда admin:  
1. `make admin\dev\setup`  -> start  
2. `make admin\dev\teardown`  -> finish


## Установка локального окружения хоста
Базовая настройка окружения - `make pipenv\base`  

Настройка dev окружения:  
1. `make pipenv\dev\setup`  
2. `make pipenv\dev\teardown`  

Настройка prod окружения:  
1. `make pipenv\prod\setup`  
2. `make pipenv\prod\teardown`  